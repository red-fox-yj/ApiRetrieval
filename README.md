# ApiRetrieval
# Prepare
```
pip install -r requirements.txt
conda install -c conda-forge faiss-gpu
```
# Results
## nvidia/NV-Embed-v2
A800 80G

| `test_size` | `k` | Overall Accuracy (no dedup) | Overall Accuracy (dedup) | Overall Precision |
|-------------|-----|----------------------------|--------------------------|-------------------|
| 0.25        | 1   | 0.9003                     | 0.9003                   | N/A               |
| 0.25        | 3   | 0.9759                     | 0.9759                   | 0.8843            |
| 0.25        | 5   | 0.9897                     | 0.9897                   | 0.8557            |
| 0.5         | 1   | 0.8713                     | 0.8713                   | N/A               |
| 0.5         | 3   | 0.9647                     | 0.9647                   | 0.8589            |
| 0.5         | 5   | 0.9877                     | 0.9877                   | 0.8335            |
| 0.75        | 1   | 0.8800                     | 0.8800                   | N/A               |
| 0.75        | 3   | 0.9718                     | 0.9718                   | 0.8169            |
| 0.75        | 5   | 0.9929                     | 0.9929                   | 0.7374            |

| `k` | `test_size` | Overall Accuracy (no dedup) | Overall Accuracy (dedup) | Overall Precision |
|-----|-------------|----------------------------|--------------------------|-------------------|
| 1   | 0.25        | 0.9003                     | 0.9003                   | N/A               |
| 1   | 0.5         | 0.8713                     | 0.8713                   | N/A               |
| 1   | 0.75        | 0.8800                     | 0.8800                   | N/A               |
| 3   | 0.25        | 0.9759                     | 0.9759                   | 0.8843            |
| 3   | 0.5         | 0.9647                     | 0.9647                   | 0.8589            |
| 3   | 0.75        | 0.9718                     | 0.9718                   | 0.8169            |
| 5   | 0.25        | 0.9897                     | 0.9897                   | 0.8557            |
| 5   | 0.5         | 0.9877                     | 0.9877                   | 0.8335            |
| 5   | 0.75        | 0.9929                     | 0.9929                   | 0.7374            |

注：上述两个表仅排列方式不同，数据完全相同。

![tsne_test_size_0 5](https://github.com/user-attachments/assets/f2dccd9e-886e-4279-86f2-10ebac6dabfc)


## BAAI/bge-en-icl
A800 80G

| `test_size` | `k` | Overall Accuracy (no dedup) | Overall Accuracy (dedup) | Overall Precision |
|-------------|-----|----------------------------|--------------------------|-------------------|
| 0.25        | 1   | 0.8935                     | 0.8935                   | N/A               |
| 0.25        | 3   | 0.9691                     | 0.9691                   | 0.8763            |
| 0.25        | 5   | 0.9863                     | 0.9863                   | 0.8502            |
| 0.5         | 1   | 0.8642                     | 0.8642                   | N/A               |
| 0.5         | 3   | 0.9700                     | 0.9700                   | 0.8413            |
| 0.5         | 5   | 0.9806                     | 0.9806                   | 0.7933            |
| 0.75        | 1   | 0.8541                     | 0.8541                   | N/A               |
| 0.75        | 3   | 0.9671                     | 0.9671                   | 0.7671            |
| 0.75        | 5   | 0.9882                     | 0.9882                   | 0.6828            |

| `k` | `test_size` | Overall Accuracy (no dedup) | Overall Accuracy (dedup) | Overall Precision |
|-----|-------------|----------------------------|--------------------------|-------------------|
| 1   | 0.25        | 0.8935                     | 0.8935                   | N/A               |
| 1   | 0.5         | 0.8642                     | 0.8642                   | N/A               |
| 1   | 0.75        | 0.8541                     | 0.8541                   | N/A               |
| 3   | 0.25        | 0.9691                     | 0.9691                   | 0.8763            |
| 3   | 0.5         | 0.9700                     | 0.9700                   | 0.8413            |
| 3   | 0.75        | 0.9671                     | 0.9671                   | 0.7671            |
| 5   | 0.25        | 0.9863                     | 0.9863                   | 0.8502            |
| 5   | 0.5         | 0.9806                     | 0.9806                   | 0.7933            |
| 5   | 0.75        | 0.9882                     | 0.9882                   | 0.6828            |

注：上述两个表仅排列方式不同，数据完全相同。

![tsne_test_size_0 5](https://github.com/user-attachments/assets/840f3ad5-614c-4901-a436-c903251087ca)

## dunzhang/stella_en_1.5B_v5
RTX4090 24G

| `test_size` | `k` | Overall Accuracy (no dedup) | Overall Accuracy (dedup) | Overall Precision |
|-------------|-----|----------------------------|--------------------------|-------------------|
| 0.25        | 1   | 0.8900                     | 0.8900                   | N/A               |
| 0.25        | 3   | 0.9794                     | 0.9794                   | 0.8843            |
| 0.25        | 5   | 1.0000                     | 1.0000                   | 0.8694            |
| 0.5         | 1   | 0.8783                     | 0.8783                   | N/A               |
| 0.5         | 3   | 0.9788                     | 0.9788                   | 0.8636            |
| 0.5         | 5   | 0.9929                     | 0.9929                   | 0.8349            |
| 0.75        | 1   | 0.8659                     | 0.8659                   | N/A               |
| 0.75        | 3   | 0.9682                     | 0.9682                   | 0.8078            |
| 0.75        | 5   | 0.9847                     | 0.9847                   | 0.7219            |

| `k` | `test_size` | Overall Accuracy (no dedup) | Overall Accuracy (dedup) | Overall Precision |
|-----|-------------|----------------------------|--------------------------|-------------------|
| 1   | 0.25        | 0.8900                     | 0.8900                   | N/A               |
| 1   | 0.5         | 0.8783                     | 0.8783                   | N/A               |
| 1   | 0.75        | 0.8659                     | 0.8659                   | N/A               |
| 3   | 0.25        | 0.9794                     | 0.9794                   | 0.8843            |
| 3   | 0.5         | 0.9788                     | 0.9788                   | 0.8636            |
| 3   | 0.75        | 0.9682                     | 0.9682                   | 0.8078            |
| 5   | 0.25        | 1.0000                     | 1.0000                   | 0.8694            |
| 5   | 0.5         | 0.9929                     | 0.9929                   | 0.8349            |
| 5   | 0.75        | 0.9847                     | 0.9847                   | 0.7219            |

注：上述两个表仅排列方式不同，数据完全相同。

![tsne_test_size_0 5](https://github.com/user-attachments/assets/9ed50168-c62b-450b-b220-5f7ca7d5ed89)
